### 모든 것은 HTTP 기반으로 동작한다. HTTP를 알기 위해서는 우선 인터넷 통신에 대해서 알아야 함.
HTTP도 결국 인터넷 통신으로 이루어져 있음. 그래서 기초적인 내용을 아는 것이 매우 중요함.

### IP
복잡한 인터넷망에서 통신하기 위한 최소한의 규칙이다. IP주소를 사용해서 식별한다.

지정한 IP주소에 데이터를 전달하는데, 이떄 패킷이라는 통신 단위로 데이터를 전송한다.

패킷은 다음처럼 구성됨.
```
출발지 주소
도착지 주소
기타 설정...
전송 데이터
```
패킷을 주고 받을 때에는 각 노드들이 주소지를 향해 찾아가고 다시 돌아온다. (라우팅)

### IP의 한계
하지만 IP만으로는 복잡한 인터넷망에서 통신하기 어렵다. 그 이유는 다음과 같다.

1. 비연결성: 패킷 받을 대상이 없거나 서비스 불능 상태여도 패킷을 전송한다.
2. 비신뢰성: 중간에 패킷이 사라지면, 패킷이 순서대로 안오면 어떻게 처리하는지 정의하지 않음.
3. 프로그램 구분: 같은 IP를 사용하는 서버에서 요청으로 보내는 프로그램이 두개 이상이면 충돌할 수 있다.

tip: 전달 순서의 경우 전송크기가 너무 크면 나눠서 요청을 보낸다고 함. 보통 1500바이트가 넘어가면 나눠서 보낸다고 한다.

### 프로토콜 계층(인터넷 프로토콜 스택의 4계층)
```
어플리케이션 계층: HTTP
전송 계층: TCP, UDP
인터넷 계층: IP
네트워크 인터페이스 계층: Ethenet Frame
```
송신하는 입장에서는 한칸씩 내려갈수록 정보를 추가한다. 수신하는 입장에서는 한칸씩 올라갈 수록 정보를 확인하여 분석하고 다음 계층으로 올려보낸다.

### TCP
TCP의 패킷의 경우 세그먼트라고 부른다. 세그먼트는 다음처럼 구성됨.
```
출발지 PORT
목적지 PORT
전송 제어
순서
검증 정보
```

TCP는 다음과 같은 특징을 가지고 있다.
```
연결지향
데이터 전달 보증
순서 보장
```
신뢰할 수 있는 프로토콜이며, 현재는 대부분 TCP를 사용함.

### 3 way handshake
```
1. SYN (데이터를 수신받을 수 있는지에 대한 요청 메시지 전달)
2. SYN + ACK (데이터를 수신받을 수 있다는 메시지 응답 메시지 전달)
3. ACK (데이터 전송을 시작하겠다는 요청 메시지 전달)
4. 데이터 전송 (최근에는 3단계에서 바로 전송도 가능)
```
참고로 이 연결은 논리적으로만 연결된 것이다. 즉, 상대가 통신을 받을 수 있는 상태라는 것만 알고 있는 상태이다.

### 데이터 전달 보증 && 순서보장
```
1. 데이터 전송
2. 데이터 잘 받았음
3. 패킷의 순서가 잘못된 경우 그 전 패킷부터 다시 보내라고 함.
```
위 내용대로 패킷의 송수신 여부를 주고받으면서 오류가 발생한 경우 다시 전송을 요청함.

### UDP
TCP의 특징과 정반대임.
```
연결지향 X
데이터 전달 보증 X
순서 보장 X
```
데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름

사실상 IP와 거의 같고, PORT와 checksum정도만 추가됨.

어플리케이션에서 추가적인 작업이 필요함.

최근에는 UDP가 주목받고있는데 HTTP3가 UDP를 사용하기 때문이다.

### PORT
한번에 둘 이상 연결을 해야하는 경우에 사용한다.

같은 IP에서 프로세스를 구분할 때 사용한다.

0 ~ 65535를 할당 가능하고, 이중 0 ~ 1023는 잘 알려진 포트로써 사용하지 않는 것이 좋다고 함.
```
FTP: 20, 21
TELNET: 23
HTTP: 80
HTTPS: 443
```

### DNS(Domain Name System)
IP는 변경될 수 있고, 기억하기 어려움.

도메인 명을 IP주소로 쉽게 바꾸기 위해 사용함.

도메인을 사용하게 되면 변경과 기억에 용이함.

### URI(Uniform Resource Identifier)
각각 단어의 의미는 다음과 같음.
```
Uniform: 리소스를 식별하는 통일된 방식
Resource: 자원, URI로 식별할 수 있는 모든 것
Identifier: 다른 항목과 구분하는데 필요한 정보
```
URI는 URL(위치), URN(이름) 또는 둘 다 추가로 분류한다.

URL(위치), URN(이름)는 URI의 하위 개념이다. 구분하는 기준이라고 생각하면 된다.

결론적으로 자원 자체를 식별하는 방법이다. 보통 URL을 자주 사용함.

### URL
```
프로토콜://호스트명:포트번호/경로?쿼리스트링=쿼리스트링&쿼리스트링=쿼리스트링#프레그먼트

프로토콜: 통신규격에 대해서 설명
호스트명: 도메인명
포트번호: 보통 생략가능(특정 포트에 접근할 때 설정)
경로: 서버 접근 위치를 결정
쿼리스트링: 서버에 전달하는 정보
프레그먼트: 서버에 전달하지는 않고 브라우저상의 위치를 나타낼 때 사용
```

### 웹 브라우저 요청 흐름
```
1. DNS를 먼저 조회해서 도메인의 IP주소를 알아냄.
2. HTTP 요청 메시지 생성
3. TCP의 3 way handshake를 한 후, IP 계층을 거쳐서 세그먼트를 서버에 전달한다.
4. 세그먼트에서 HTTP 메시지를 꺼낸 후, 해석을 시작한다.
5. 서버에서 요청에 대한 처리를 진행 후, 응답 메시지를 생성해서 클라이언트에 전달한다.
```