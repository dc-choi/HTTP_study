### HTTP란?
```
HyperText Transfer Protocol의 약자로 HTML문서를 전송하기 위해서 개발한 프로토콜

현재는 모든 것을 전송하는데 사용함. 거의 모든 형태의 데이터를 주고 받는것이 가능

EX) HTML, TEXT, Image, Voice, Media, File, JSON, XML(API)

서버간에 데이터를 주고 받을 때도 대부분 HTTP 사용
```

### HTTP 역사
```
0.9 (1991): GET 메서드만 지원, 헤더는 없음
1.0 (1996): 메서드, 헤더 추가
1.1 (1997, 가장 많이 사용, 우리에게 가장 중요한 버전): RFC2068(1997) -> RFC2616(1999) -> RFC7230~7235(2014)
2.0 (2015): 성능 개선
3.0 (진행중): TCP 대신에 UDP 사용, 성능 개선
```

### 기반 프로토콜
```
TCP: 1.1, 2.0
UDP: 3.0
현재는 1.1을 주로 사용하고 있지만, 점점 2.0, 3.0도 같이 증가하고 있음.
```

### HTTP 특징
```
1. 클라이언트 서버 구조
2. 무상태 프로토콜, 비연결성
3. HTTP 메시지,
4. 단순함, 확장 가능
```

### 클라이언트 서버 구조
```
Request, Response를 기반으로 하고있으며, 클라이언트는 서버에 요청을 보내고, 응답을 대기하고 서버가 요청에 대한 결과를 만들어서 응답을 해준다.

분리하는 것이 매우 중요함.
비즈니스 로직, 데이터는 서버에서 처리하고 UI, 사용성에 대해서는 클라이언트가 처리함.
이렇게 하면 좋은점이 각각 서로 좋은 방향으로 진화할 수 있음.
```

### stateless
```
서버가 클라이언트의 상태를 보존하지 않음.

장점: 서버 확장성 높음(스케일 아웃)

단점: 클라이언트가 추가 데이터 전송
```

### stateful, stateless 차이점
```
stateful: 상태유지, 일상적인 대화, 중간에 다른 서버로 바뀌면 안된다, 중간에 장애가 나면 처음부터 다시해야함.

stateless: 무상태, 따로 상태유지가 필요하지만 중간에 다른 서버로 바뀌어도 된다, 갑자기 요청이 증가해도 서버를 대거 투입할 수 있다.

그래서 무한한 서버 증설을 위해 무상태를 사용하게 되었다. 무상태는 응답 서버를 쉽게 바꿀 수 있기 때문이다.(스케일 아웃: 수평 확장 유리)
```

### stateless 한계
```
모든 것을 무상태로 설계 할 수 있는 경우도 있고 없는 경우도 있다.
로그인의 경우 상태 유지가 필요하다. 로그인한 사용자의 상태를 서버에 유지해야 하기 때문
일반적으로 브라우저 쿠키와 서버 세션등을 사용해서 상태를 유지한다.
만약에 상태유지를 사용해도 최소한으로 사용.

또 다른 문제점은 데이터를 너무 많이 보냄.
```

### 비연결성
```
HTTP는 기본적으로 연결을 유지하지 않음, 일반적으로 초 단위 이하의 빠른 속도로 응답

1시간동안 수천명이 서비스를 사용해도 실제 서버에서 동시에 처리하는 요청은 수십새 이하로 적음
EX) 계속 연속해서 검색 버튼을 누르지는 않는다.

서버 자원을 매우 효율적으로 사용할 수 있음.
```

### 비연결성 한계
```
TCP/IP 연결을 새로 맺어야 함. -> 3way handshake 시간 추가
웹 브라우저로 사이트를 요청하면 HTML 뿐만 아니라 자바스크립트, CSS, 추가 이미지등등 수 많은 자원이 함께 다운로드
지금은 HTTP 지속 연결(Persistent Connections)로 문제해결
HTTP/2, HTTP/3에서 더 많은 최적화
```

### Persistent Connections
```
하나의 요청마다 TCP/IP 연결을 맺어주는 부분을 보완하기 위해 나타남.
일정 시간을 기준으로 요청이 들어오면 연결을 끊지않고 계속 유지함.

stateless를 기억하면 같은 시간에 딱 맞추어 발생하는 대용량 트래픽을 어느정도 해소할 수 있음.
EX) 선착순 이벤트, 명절 KTX 예약, 학과 수업 등록의 경우 동시에 수만명이 동시 요청을 보냄.
이벤트 설계시 첫 페이지는 정적 페이지를 던져줌, 거기서 지연을 시키고 요청을 보내도록 함.
```

### HTTP 메시지
```
start-line: 시작라인
header: 헤더
empty line: 공백 라인
message body

EX) 요청 메시지(바디를 가질 수 있음)
GET /search?query=hello&lang=ko HTTP/1.1
Host: www.google.com

EX) 응답 메시지
HTTP/1.1 200 OK
Content-Type: text/html;charset=UTF-8
Content-Length: 3423

<html>
<body>...</body>
</html>
```

### 시작라인
```
start-line = request-line / status-line
request-line = method (공백) request-target (공백) HTTP-version
status-line = HTTP-version (공백) status-code (공백) reason-phrase
```

### 헤더
```
header-field = field-name : (공백 허용) field-value (공백 허용)
HTTP 전송에 필요한 모든 부가정보를 담는다.
EX) 메시지 바디의 내용, 메시지 바디의 크기, 압축, 인증, 요청 클라이언트 정보, 서버 어플리케이션 정보, 캐시 관리 정보...
표준 헤더가 너무 많음... 필요시 임의의 헤더 추가 가능
```

### 바디
```
실제 전송할 데이터
EX) HTML, media, image, JSON 등등

메시지는 정말 단순하고 확장에 용이하다.
실제로 스펙도 읽어볼만 하다고 한다.
크게 성공하는 기술은 단순하면서 확장에 용이한 기술이다.
```
